<!DOCTYPE html>
<html>
	<head>
		<title>Operon Graphic</title>

<style>

#operonContainer{
	width: 90vw;
	margin: auto;
	height: 100vh;
}

.spacer{
	display: block;
	height: 20vh;
}

.Rgene{
	height: 40px;
	display: inline-block;
	position: relative;
	z-index: 1;
}


.Rgene:before{
	content:"";
	position: absolute;
	right: 0;
	bottom: 0;
	width: 0;
	height: 0;
	border-left: var(--color);
	border-top: 20px solid white;
	border-bottom: 20px solid white;
	z-index: 2;
}

.Rgene .description {
	visibility: hidden;
	width: 9rem;
	text-align: center;
	padding: 5px 0;
	border: 1px solid black;
	border-radius: 3px;
	border-color: #225470;
	position: absolute;
	top: 250%;
	left:50%;
	transform: translate(-50%, -50%);
	z-index: 3;
	color: black;
}

.Rgene:hover .description {
	visibility: visible;
}

.Lgene {
	height: 40px;
	display: inline-block;
	position: relative;
	z-index:1;
}

.Lgene:after{
	content:"";
	position: absolute;
	left: 0;
	bottom: 0;
	width: 0;
	height: 0;
	border-right: var(--color);
	border-top: 20px solid white;
	border-bottom: 20px solid white;
	z-index: 2;
}

.Lgene .description {
	visibility: hidden;
	width: 9rem;
	text-align: center;
	padding: 5px 0;
	border: 1px solid black;
	border-radius: 3px;
	border-color: #225470;
	position: absolute;
	top: 250%;
	left:50%;
	transform: translate(-50%, -50%);
	z-index: 3;
	color: black;
}

.Lgene:hover .description {
	visibility: visible;
}

#line{
	background-color: black;
	height:2px;
	width: 90%;
	position: absolute;
	top: 19px;
}

</style>

			
	</head>

	<body>
		<div id="operonContainer"></div>
	</body>



<script>

	
	function renderOperon(operon) {

	let container = document.getElementById("operonContainer");

	for (i in operon) {
		
		let link = document.createElement('a');
		if (operon[i]['link'].length !== 0){
			link.setAttribute("href", "https://ncbi.nlm.nih.gov/protein/"+operon[i]['link']); }
		link.setAttribute("target", "_blank");
		let gene = document.createElement('div');
		if (operon[i]["direction"] == "+"){
			gene.classList.add("Rgene");
		} else {
			gene.classList.add("Lgene");
		}

		gene.setAttribute("style", "background-color: "+operon[i]["color"]+
			"; width:"+operon[i]["length"]+
			"; margin-right:"+operon[i]["spacer"])
		
		gene.style.setProperty('--color', '20px solid '+operon[i]["color"]);
		
		description = document.createElement('span');
		description.innerText = operon[i]["description"];
		description.classList.add("description");
		gene.appendChild(description)
		link.appendChild(gene);
		container.appendChild(link);

		spacer = document.createElement('span');
		spacer.classList.add("spacer");
		//spacer.innerHTML = "the";

	}
	let line = document.createElement('hr');
	line.id = "line";
	container.appendChild(line);
	container.appendChild(spacer);
	}


	//since javascript doesn't have a built-in range function	
	function range(start, stop){
		var myList = [];
		for (let i = start; i <= (stop-1); i++){
			myList.push(i);
		}
		return myList;
	}



            // new section appended below //

            var graphic = ['{"0": {"length": "11.0%", "description": "short-chain dehydrogenase", "color": "#ff4242", "direction": "-", "spacer": "1.0%", "link": "VVE59689.1"}, "1": {"length": "6.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "-", "spacer": "1.0%", "link": "VVE59690.1"}, "2": {"length": "12.0%", "description": "3-oxoacyl-ACP reductase", "color": "#ff4242", "direction": "-", "spacer": "2.0%", "link": "VVE59691.1"}, "3": {"length": "17.0%", "description": "3,6-diketocamphane 1,6 monooxygenase", "color": "#ff4242", "direction": "-", "spacer": "3.0%", "link": "VVE59692.1"}, "4": {"length": "10.0%", "description": "TetR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "VVE59693.1"}}', '{"0": {"length": "11.0%", "description": "glucose 1-dehydrogenase", "color": "#ff4242", "direction": "-", "spacer": "1.0%", "link": "WP_150700311.1"}, "1": {"length": "6.0%", "description": "nuclear transport factor 2 family protein", "color": "#ffe042", "direction": "-", "spacer": "1.0%", "link": "WP_150700312.1"}, "2": {"length": "12.0%", "description": "SDR family oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "2.0%", "link": "WP_150700313.1"}, "3": {"length": "17.0%", "description": "LLM class flavin-dependent oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "4.0%", "link": "WP_150700314.1"}, "4": {"length": "9.0%", "description": "TetR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "WP_150700315.1"}}', '{"0": {"length": "17.0%", "description": "LLM class flavin-dependent oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "5.0%", "link": "WP_069084939.1"}, "1": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "3.0%", "link": "WP_069084940.1"}, "2": {"length": "13.0%", "description": "IS5 family transposase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": ""}}', '{"0": {"length": "17.0%", "description": "3,6-diketocamphane 1,6-monooxygenase", "color": "#ff4242", "direction": "-", "spacer": "3.0%", "link": "AOE86677.1"}, "1": {"length": "11.0%", "description": "TetR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "11.0%", "link": "AOE86678.1"}, "2": {"length": "5.0%", "description": "transposase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "AOE86679.1"}}', '{"0": {"length": "7.0%", "description": "putative NUDIX hydrolase", "color": "#ff4242", "direction": "-", "spacer": "3.0%", "link": "BAN13300.1"}, "1": {"length": "17.0%", "description": "3,6-diketocamphane monooxygenase", "color": "#ff4242", "direction": "-", "spacer": "3.0%", "link": "BAN13301.1"}, "2": {"length": "9.0%", "description": "putative TetR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "9.0%", "link": "BAN13302.1"}, "3": {"length": "3.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "-", "spacer": "0.0%", "link": "BAN13303.1"}}', '{"0": {"length": "5.0%", "description": "helicase", "color": "#ff4242", "direction": "-", "spacer": "5.0%", "link": "EZQ18700.1"}, "1": {"length": "17.0%", "description": "PEP-utilizing protein mobile subunit", "color": "black", "direction": "+", "spacer": "0.0%", "link": "EZQ18701.1"}, "2": {"length": "11.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "EZQ18702.1"}, "3": {"length": "7.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "EZQ18905.1"}, "4": {"length": "6.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "EZQ18703.1"}, "5": {"length": "15.0%", "description": "pyruvate phosphate dikinase", "color": "#ff4242", "direction": "+", "spacer": "2.0%", "link": "EZQ18704.1"}, "6": {"length": "7.0%", "description": "TetR family transcriptional regulator", "color": "#6eff42", "direction": "+", "spacer": "2.0%", "link": "EZQ18705.1"}, "7": {"length": "3.0%", "description": "transposase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "EZQ18706.1"}, "8": {"length": "6.0%", "description": "hypothetical protein", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "EZQ18906.1"}, "9": {"length": "11.0%", "description": "luciferase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "EZQ18707.1"}}', '{"0": {"length": "12.0%", "description": "SDR family oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_105643232.1"}, "1": {"length": "10.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "3.0%", "link": "WP_105643233.1"}, "2": {"length": "17.0%", "description": "LLM class flavin-dependent oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_105643234.1"}}', '{"0": {"length": "14.0%", "description": "TIGR00255 family protein", "color": "black", "direction": "+", "spacer": "1.0%", "link": "SFV02546.1"}, "1": {"length": "10.0%", "description": "transcriptional regulator, TetR family", "color": "blue", "direction": "-", "spacer": "6.0%", "link": "SFV02554.1"}, "2": {"length": "11.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "6.0%", "link": "SFV02557.1"}, "3": {"length": "4.0%", "description": "nitric oxide reductase NorE protein/cytochrome c oxidase subunit 3", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "SFV02565.1"}, "4": {"length": "4.0%", "description": "Cytochrome C oxidase subunit IV", "color": "#ff4242", "direction": "+", "spacer": "2.0%", "link": "SFV02571.1"}, "5": {"length": "19.0%", "description": "3-phenylpropionate/trans-cinnamate dioxygenase ferredoxin reductase subunit", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "SFV02578.1"}, "6": {"length": "5.0%", "description": "ferredoxin, 2Fe-2S", "color": "black", "direction": "+", "spacer": "0.0%", "link": "SFV02585.1"}}', '{"0": {"length": "11.0%", "description": "gliding motility-associated lipoprotein GldK", "color": "black", "direction": "-", "spacer": "1.0%", "link": "OYU34701.1"}, "1": {"length": "10.0%", "description": "protein-tyrosine-phosphatase", "color": "#ff4242", "direction": "-", "spacer": "1.0%", "link": "OYU34702.1"}, "2": {"length": "10.0%", "description": "oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "OYU34703.1"}, "3": {"length": "15.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "-", "spacer": "1.0%", "link": "OYU34704.1"}, "4": {"length": "8.0%", "description": "hypothetical protein", "color": "blue", "direction": "-", "spacer": "1.0%", "link": "OYU34705.1"}, "5": {"length": "11.0%", "description": "LysR family transcriptional regulator", "color": "#6eff42", "direction": "-", "spacer": "1.0%", "link": "OYU34706.1"}, "6": {"length": "25.0%", "description": "malate synthase G", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "OYU34707.1"}}', '{"0": {"length": "15.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_129412056.1"}, "1": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "2.0%", "link": "WP_129412057.1"}, "2": {"length": "22.0%", "description": "MATE family efflux transporter", "color": "#ffe042", "direction": "-", "spacer": "6.0%", "link": "WP_129412058.1"}, "3": {"length": "37.0%", "description": "penicillin acylase family protein", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_129416098.1"}}', '{"0": {"length": "15.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": ""}, "1": {"length": "9.0%", "description": "TetR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "2.0%", "link": "WP_144377731.1"}, "2": {"length": "22.0%", "description": "MATE family efflux transporter", "color": "#ffe042", "direction": "-", "spacer": "6.0%", "link": "WP_144377733.1"}, "3": {"length": "37.0%", "description": "penicillin acylase family protein", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": ""}}', '{"0": {"length": "12.0%", "description": "SDR family oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "6.0%", "link": "WP_048879948.1"}, "1": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "WP_048879949.1"}, "2": {"length": "15.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_048879950.1"}}', '{"0": {"length": "16.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_043286844.1"}, "1": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "2.0%", "link": "WP_028220413.1"}, "2": {"length": "4.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "WP_167338400.1"}}', '{"0": {"length": "32.0%", "description": "AAA family ATPase", "color": "#ff4242", "direction": "-", "spacer": "3.0%", "link": "WP_110127944.1"}, "1": {"length": "7.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "2.0%", "link": "WP_146215841.1"}, "2": {"length": "9.0%", "description": "SDR family oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_110127946.1"}, "3": {"length": "11.0%", "description": "alpha/beta hydrolase", "color": "#ff4242", "direction": "+", "spacer": "1.0%", "link": ""}, "4": {"length": "7.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "3.0%", "link": "WP_110127947.1"}, "5": {"length": "4.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "WP_181397314.1"}, "6": {"length": "10.0%", "description": "NERD domain-containing protein", "color": "black", "direction": "+", "spacer": "1.0%", "link": "WP_110127949.1"}, "7": {"length": "5.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "WP_181397315.1"}}', '{"0": {"length": "2.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "-", "spacer": "5.0%", "link": "WP_081771615.1"}, "1": {"length": "8.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "-", "spacer": "8.0%", "link": "WP_035512804.1"}, "2": {"length": "8.0%", "description": "pseudouridine-5-phosphate glycosidase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_028203557.1"}, "3": {"length": "14.0%", "description": "NAD(P)/FAD-dependent oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "2.0%", "link": "WP_028203558.1"}, "4": {"length": "7.0%", "description": "SDR family NAD(P)-dependent oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "6.0%", "link": "WP_028203559.1"}, "5": {"length": "9.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_028203560.1"}, "6": {"length": "5.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "2.0%", "link": "WP_028203561.1"}, "7": {"length": "9.0%", "description": "zinc-binding dehydrogenase", "color": "#ff4242", "direction": "-", "spacer": "1.0%", "link": "WP_028203562.1"}, "8": {"length": "8.0%", "description": "LysR family transcriptional regulator", "color": "#6eff42", "direction": "+", "spacer": "0.0%", "link": ""}}', '{"0": {"length": "6.0%", "description": "phosphonate metabolism protein/1,5-bisphosphokinase (PRPP-forming) PhnN", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190290.1"}, "1": {"length": "12.0%", "description": "alpha-D-ribose 1-methylphosphonate 5-triphosphate diphosphatase", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190292.1"}, "2": {"length": "8.0%", "description": "phosphonate C-P lyase system protein PhnL", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190294.1"}, "3": {"length": "9.0%", "description": "ATP-binding cassette domain-containing protein", "color": "black", "direction": "-", "spacer": "0.0%", "link": "WP_133190296.1"}, "4": {"length": "10.0%", "description": "alpha-D-ribose 1-methylphosphonate 5-phosphate C-P-lyase PhnJ", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190298.1"}, "5": {"length": "12.0%", "description": "carbon-phosphorus lyase complex subunit PhnI", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190300.1"}, "6": {"length": "6.0%", "description": "phosphonate C-P lyase system protein PhnH", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_133190302.1"}, "7": {"length": "5.0%", "description": "phosphonate C-P lyase system protein PhnG", "color": "#ff4242", "direction": "-", "spacer": "2.0%", "link": "WP_133190330.1"}, "8": {"length": "8.0%", "description": "phosphonate metabolism transcriptional regulator PhnF", "color": "#6eff42", "direction": "-", "spacer": "2.0%", "link": "WP_133190304.1"}, "9": {"length": "6.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "WP_133190306.1"}, "10": {"length": "10.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": ""}}', '{"0": {"length": "17.0%", "description": "AlkZ family DNA glycosylase", "color": "#ff4242", "direction": "-", "spacer": "1.0%", "link": "WP_106180047.1"}, "1": {"length": "11.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "1.0%", "link": "WP_106180048.1"}, "2": {"length": "5.0%", "description": "nuclear transport factor 2 family protein", "color": "#ffe042", "direction": "+", "spacer": "0.0%", "link": "WP_181193354.1"}, "3": {"length": "13.0%", "description": "SDR family NAD(P)-dependent oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "6.0%", "link": "WP_106180050.1"}, "4": {"length": "13.0%", "description": "alpha/beta hydrolase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_106180051.1"}}', '{"0": {"length": "14.0%", "description": "AraC family transcriptional regulator", "color": "#6eff42", "direction": "-", "spacer": "1.0%", "link": "WP_090359702.1"}, "1": {"length": "11.0%", "description": "SDR family oxidoreductase", "color": "#ff4242", "direction": "-", "spacer": "4.0%", "link": "WP_090359444.1"}, "2": {"length": "16.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "-", "spacer": "0.0%", "link": "WP_090359446.1"}, "3": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "-", "spacer": "1.0%", "link": "WP_090359448.1"}, "4": {"length": "2.0%", "description": "FAD-dependent oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": ""}}', '{"0": {"length": "15.0%", "description": "glycosyltransferase family 2 protein", "color": "#ff4242", "direction": "-", "spacer": "6.0%", "link": "WP_012383042.1"}, "1": {"length": "5.0%", "description": "cold-shock protein", "color": "black", "direction": "+", "spacer": "5.0%", "link": "WP_012383043.1"}, "2": {"length": "8.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "WP_012383044.1"}, "3": {"length": "14.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "+", "spacer": "5.0%", "link": "WP_012383045.1"}, "4": {"length": "12.0%", "description": "oxidoreductase", "color": "#ff4242", "direction": "+", "spacer": "0.0%", "link": "WP_012383046.1"}, "5": {"length": "14.0%", "description": "AraC family transcriptional regulator", "color": "#6eff42", "direction": "+", "spacer": "1.0%", "link": "WP_012383047.1"}, "6": {"length": "10.0%", "description": "hypothetical protein", "color": "#bfbfbf", "direction": "+", "spacer": "0.0%", "link": "WP_012383048.1"}}', '{"0": {"length": "16.0%", "description": "lyase", "color": "#ff4242", "direction": "-", "spacer": "4.0%", "link": "WP_114824835.1"}, "1": {"length": "5.0%", "description": "helix-turn-helix transcriptional regulator", "color": "#6eff42", "direction": "+", "spacer": "0.0%", "link": "WP_114824836.1"}, "2": {"length": "7.0%", "description": "SRPBCC family protein", "color": "black", "direction": "+", "spacer": "4.0%", "link": "WP_114824837.1"}, "3": {"length": "9.0%", "description": "TetR/AcrR family transcriptional regulator", "color": "blue", "direction": "+", "spacer": "0.0%", "link": "WP_114824838.1"}, "4": {"length": "16.0%", "description": "NAD-dependent epimerase/dehydratase family protein", "color": "#ff4242", "direction": "+", "spacer": "6.0%", "link": "WP_114824839.1"}, "5": {"length": "13.0%", "description": "transporter", "color": "#ffe042", "direction": "+", "spacer": "0.0%", "link": "WP_114824840.1"}}']

            var len = graphic.length
            for (i in range(0, len)){
                var data = JSON.parse(graphic[i])
                renderOperon(data)
            }


    </script>

    </html>
    